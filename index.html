<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Landing Page - Psic√≥loga</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
</head>
<body>
  <div id="background"></div>

  <main class="center">
    <section class="form-box">
      <h2 style="text-align:center;">Vamos conversar? Preencha seus dados para que eu possa entrar em contato e explicar melhor meu trabalho.</h2>

      <form id="contact-form" action="https://formspree.io/f/mkgzdvrn" method="POST">
        <input type="text" name="nome" placeholder="Qual seu seu nome?" required />
        <input type="tel" name="whatsapp" placeholder="Seu WhatsApp" required />

        <label class="checkbox">
          <input type="checkbox" id="toggle-detalhes" />
          Gostaria de deixar alguma d√∫vida ou coment√°rio?
        </label>

        <div id="detalhes">
          <div class="radio-group">
            <p class="radio-title">√â para voc√™?</p>
            <label><input type="radio" name="primeiro_atendimento" value="sim"> Sim</label>
            <label><input type="radio" name="primeiro_atendimento" value="nao"> N√£o</label>
          </div>

          <textarea name="mensagem" placeholder="O que te trouxe at√© aqui?"></textarea>
        </div>

        <button type="submit">Enviar</button>
      </form>

      <!-- Tela de sucesso com redes sociais -->
      <div id="success-container" class="success-container">
        <p id="form-feedback" class="success-msg">
          Obrigada! Em breve entrarei em contato. ü¶ã
        </p>
        <div class="social-icons">
          <a href="https://instagram.com/psicoanapaulaaraujo" target="_blank" title="Instagram">
            <i class="fab fa-instagram fa-2x"></i>
          </a>
          <a href="https://wa.me/5548988756920" target="_blank" title="WhatsApp">
            <i class="fab fa-whatsapp fa-2x"></i>
          </a>
        </div>
      </div>

    </section>
  </main>

  <script>

    // Background animado com blur ao focar no formul√°rio
    const bg = document.getElementById('background');
    const formBox = document.querySelector('.form-box');
    window.addEventListener('load', () => {
      bg.style.transform = "scale(1) translate(0,0)";
      bg.style.transition = "transform 4s ease-in-out, filter 4s ease-in-out";
      bg.style.filter = "brightness(0.9)";
    });
    formBox.addEventListener('mouseenter', () => { bg.style.filter = "brightness(1) blur(1px)"; });
    formBox.addEventListener('mouseleave', () => { bg.style.filter = "brightness(1) blur(0)"; });


    // Toggle detalhes
    const toggle = document.getElementById('toggle-detalhes');
    const detalhes = document.getElementById('detalhes');
    toggle.addEventListener('change', () => {
      if (toggle.checked) {
        detalhes.style.maxHeight = detalhes.scrollHeight + "px";
        detalhes.style.opacity = 1;
      } else {
        detalhes.style.maxHeight = 0;
        detalhes.style.opacity = 0;
      }
    });

    // Envio formul√°rio via AJAX
    const form = document.getElementById('contact-form');
    const successContainer = document.getElementById('success-container');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = new FormData(form);
      const action = form.getAttribute("action");

      try {
        const response = await fetch(action, {
          method: "POST",
          body: data,
          headers: { 'Accept': 'application/json' }
        });

        if (response.ok) {
          form.style.display = "none";
          successContainer.style.display = "block";
        } else {
          alert("Ocorreu um erro. Tente novamente.");
        }
      } catch (error) {
        alert("Erro de conex√£o. Verifique sua internet.");
      }
    });
  </script>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const checkbox = document.getElementById("mostrarDetalhes");
  const detalhes = document.getElementById("detalhes");

  // Garante que inicie fechado
  detalhes.style.maxHeight = "0";
  detalhes.style.opacity = "0";

  checkbox.addEventListener("change", function () {
    if (this.checked) {
      detalhes.style.maxHeight = detalhes.scrollHeight + "px";
      detalhes.style.opacity = "1";
    } else {
      detalhes.style.maxHeight = "0";
      detalhes.style.opacity = "0";
    }
  });
});
</script>

</body>
</html>
